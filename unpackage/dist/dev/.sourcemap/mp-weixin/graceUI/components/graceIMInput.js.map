{"version":3,"sources":["webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?65fa","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?d5f9","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?eac8","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?090e","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?5b6c","webpack:///C:/code/shop_weapp/graceUI/components/graceIMInput.vue?4214"],"names":["bgAudioMannager","name","props","user","type","Object","default","token","String","config","data","uploading","recShow","recTxt","inputMsg","recorderManager","recing","recLength","recTimer","tmpVoice","voiceLen","voiceBtnShow","player","playTxt","created","_self","uni","getRecorderManager","onStop","res","tempFilePath","clearInterval","onError","showToast","title","icon","methods","rec","stop","start","duration","format","setInterval","bind","playVoice","getBackgroundAudioManager","src","onEnded","sendVoiceMsg","showLoading","uploadTask","uploadFile","url","serverUrl","filePath","success","uploadFileRes","JSON","parse","status","msg","contentType","content","length","sendSocketMessage","stringify","complete","setTimeout","hideLoading","fail","e","console","log","showRec","closeRec","sendTextMsg","chooseImg","chooseImage","count","sizeType","sourceType","tempFilePaths"],"mappings":"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","file":"graceUI/components/graceIMInput.js","sourcesContent":["import { render, staticRenderFns } from \"./graceIMInput.vue?vue&type=template&id=7bdc07a3&name=graceIMMsg&\"\nimport script from \"./graceIMInput.vue?vue&type=script&lang=js&\"\nexport * from \"./graceIMInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./graceIMInput.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7bdc07a3', component.options)\n    } else {\n      api.reload('7bdc07a3', component.options)\n    }\n    module.hot.accept(\"./graceIMInput.vue?vue&type=template&id=7bdc07a3&name=graceIMMsg&\", function () {\n      api.rerender('7bdc07a3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"code/shop_weapp/graceUI/components/graceIMInput.vue\"\nexport default component.exports","export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./graceIMInput.vue?vue&type=template&id=7bdc07a3&name=graceIMMsg&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./graceIMInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./graceIMInput.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar bgAudioMannager = {};\r\nexport default {\r\n\tname: \"graceIMMsg\",\r\n\tprops: {\r\n\t\tuser : {\r\n\t\t\ttype : Object,\r\n\t\t\tdefault : function(){return {};}\r\n\t\t},\r\n\t\ttoken : {\r\n\t\t\ttype : String,\r\n\t\t\tdefault : \"\"\r\n\t\t},\r\n\t\tconfig :{\r\n\t\t\ttype : Object,\r\n\t\t\tdefault : function(){return {};}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuploading       : false,\r\n\t\t\trecShow         : false,\r\n\t\t\trecTxt          : \"请点击绿色按钮开始录音\",\r\n\t\t\tinputMsg        : \"\",\r\n\t\t\trecorderManager : null,\r\n\t\t\trecing          : false,\r\n\t\t\trecLength       : 1,\r\n\t\t\trecTimer        : null,\r\n\t\t\ttmpVoice        : '',\r\n\t\t\tvoiceLen        : 0,\r\n\t\t\tvoiceBtnShow    : false,\r\n\t\t\t// 播放相关\r\n\t\t\tplayer          : null,\r\n\t\t\tplayTxt         : \"试听语音\"\r\n\t\t}\r\n\t},\r\n\tcreated : function(){\r\n\t\tvar _self = this;\r\n\r\n\t\tthis.voiceBtnShow = true;\r\n\t\tthis.recorderManager = uni.getRecorderManager();\r\n\t\tthis.recorderManager.onStop((res) => {\r\n\t\t\t_self.tmpVoice     = res.tempFilePath;\r\n\t\t\tthis.recing = false;\r\n\t\t\tthis.recTxt   =  \"... 已录音 \"+this.recLength+\"s, 点击绿色按钮重新录音 ...\";\r\n\t\t\tclearInterval(this.recTimer);\r\n\t\t});\r\n\t\tthis.recorderManager.onError(function () {\r\n\t\t\tuni.showToast({ title: '录音失败', icon: 'none' });\r\n\t\t\t_self.recing = false;\r\n\t\t\t_self.recTxt   = \"请点击绿色按钮开始录音\",\r\n\t\t\tclearInterval(_self.recTimer);\r\n\t\t});\r\n\r\n\t},\r\n\tmethods:{\r\n\t\t// 录音\r\n\t\trec : function(){\r\n\t\t\tif (this.recing){\r\n\t\t\t\tthis.recorderManager.stop();\r\n\t\t\t\tthis.recing = false;\r\n\t\t\t\tthis.recTxt   =  \"... 已录音 \"+this.recLength+\"s, 点击绿色按钮重新录音 ...\";\r\n\t\t\t\tclearInterval(this.recTimer);\r\n\t\t\t} else {\r\n\t\t\t\tthis.recorderManager.start({duration:60000, format:'mp3' });\r\n\t\t\t\tthis.recing     = true;\r\n\t\t\t\tthis.recTxt     =  \"... 正在录音 ...\";\r\n\t\t\t\tthis.recLength  = 1;\r\n\t\t\t\tthis.recTimer   = setInterval(function(){this.recLength++;}.bind(this), 1000);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 播放录音\r\n\t\tplayVoice : function(){\r\n\t\t\tvar _self = this;\r\n\t\t\tif(this.playTxt == '正在播放'){\r\n\t\t\t\tthis.playTxt = '试听语音';\r\n\t\t\t\tbgAudioMannager.stop();\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tbgAudioMannager = uni.getBackgroundAudioManager();\r\n\t\t\tthis.playTxt      = '正在播放';\r\n\t\t\tbgAudioMannager.src   = this.tmpVoice;\r\n\t\t\tbgAudioMannager.onEnded(function(){\r\n\t\t\t\t_self.playTxt = \"试听语音\";\r\n\t\t\t});\r\n\t\t\tbgAudioMannager.onStop(function(){\r\n\t\t\t\t_self.playTxt = \"试听语音\";\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t// 发送录音\r\n\t\tsendVoiceMsg : function(){\r\n\t\t\tvar _self = this;\r\n\t\t\tif (_self.tmpVoice == '') {\r\n\t\t\t\tuni.showToast({ title: \"请先录制一段语音\", icon: \"none\" });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 关闭界面\r\n\t\t\tthis.recShow = false;\r\n\t\t\tuni.showLoading({ title:\"正在发送\" });\r\n\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\turl      : _self.config.serverUrl+'?c=uploadFile&token='+_self.token,\r\n\t\t\t\tfilePath : _self.tmpVoice,\r\n\t\t\t\tname     : 'gChatUploadFile',\r\n\t\t\t\tsuccess   : function (uploadFileRes) {\r\n\t\t\t\t\tvar res = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\tif(res.status == 'ok'){\r\n\t\t\t\t\t\tvar msg         = _self.user;\r\n\t\t\t\t\t\tmsg.type        = 'msg';\r\n\t\t\t\t\t\tmsg.contentType = 'voice';\r\n\t\t\t\t\t\tmsg.content     = res.msg;\r\n\t\t\t\t\t\tmsg.length      = _self.recLength;\r\n\t\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\t\tdata : JSON.stringify(msg),\r\n\t\t\t\t\t\t\tcomplete:function(){\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t_self.tmpVoice = '';\r\n\t\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\t\t\t\tconsole.log('消息发送失败');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetTimeout(function(){uni.hideLoading();}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tfail:function(e){\r\n\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 展示录音界面\r\n\t\tshowRec : function(){this.recShow = true;},\r\n\t\t// 关闭录音界面\r\n\t\tcloseRec: function (){this.recShow = false;},\r\n\t\t// 发送文本消息\r\n\t\tsendTextMsg: function () {\r\n\t\t\tif (this.inputMsg < 1) {return false;}\r\n\t\t\tvar msg         = this.user;\r\n\t\t\tmsg.type        = 'msg';\r\n\t\t\tmsg.contentType = 'txt';\r\n\t\t\tmsg.content     = this.inputMsg;\r\n\t\t\tmsg.token       = this.token;\r\n\t\t\tconsole.log(msg,33);\r\n\t\t\tuni.sendSocketMessage({\r\n\t\t\t\tdata : JSON.stringify(msg),\r\n\t\t\t\tfail:function(e){console.log('消息发送失败 ...');}\r\n\t\t\t});\r\n\t\t\tthis.inputMsg = '';\r\n\t\t},\r\n\t\t// 选择图片\r\n\t\tchooseImg : function(){\r\n\t\t\tif(this.uploading){ return false;}\r\n\t\t\tvar _self = this;\r\n\t\t\tuni.showLoading({title:\"选择图片\"});\r\n\t\t\tthis.uploading = true;\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tsuccess : function(res){\r\n\t\t\t\t\tuni.showLoading({title:\"图片发送中\"});\r\n\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\t\turl      : _self.config.serverUrl+'?c=uploadFile&token='+_self.token,\r\n\t\t\t\t\t\tfilePath : tempFilePaths[0],\r\n\t\t\t\t\t\tname     : 'gChatUploadFile',\r\n\t\t\t\t\t\tsuccess   : function (uploadFileRes) {\r\n\t\t\t\t\t\t\tvar res = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\t\tif(res.status == 'ok'){\r\n\t\t\t\t\t\t\t\tvar msg         = _self.user;\r\n\t\t\t\t\t\t\t\tmsg.type        = 'msg';\r\n\t\t\t\t\t\t\t\tmsg.contentType = 'img';\r\n\t\t\t\t\t\t\t\tmsg.content     = res.msg;\r\n\t\t\t\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\t\t\t\tdata : JSON.stringify(msg),\r\n\t\t\t\t\t\t\t\t\tcomplete:function(){\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('消息发送失败');\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){uni.hideLoading();}, 500);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\t\t_self.uploading = false;\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tfail:function(){uni.hideLoading();}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./graceIMInput.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./graceIMInput.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}