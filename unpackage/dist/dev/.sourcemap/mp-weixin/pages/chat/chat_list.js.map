{"version":3,"sources":["webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?e9f4","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?b4da","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?14c6","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?cd21","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?7085","webpack:///C:/code/shop_weapp/main.js","webpack:///C:/code/shop_weapp/pages/chat/chat_list.vue?26e6"],"names":["data","Conversation","username","uni","getStorageSync","Time_now","Date","Y","M","D","h","m","s","onLoad","showLoading","title","onShow","Times_now","init","methods","Vue","prototype","JIM","JMessage","console","log","appkey","key","timestamp","getTime","signature","that","onSuccess","jLogin","onFail","onDisconnect","onMsgReceive","$emit","messages","content","onSyncConversation","$once","$off","un","pw","login","getConversation","conversations","$data","reverse","i","length","get_message_time","mtime","get_avatar","avatar","hideLoading","onEventNotification","onUserInfUpdate","msg_ids","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","timess","test","con","media_id","getResource","url","to_chat","list_id","chater_info","setStorage","navigateTo","animationDuration","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAyuB,CAAgB,wuBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4B7vB;AACA;AACA,0F,8FA9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAKe,EACdA,IADc,kBACP,CACN,OAAO,EACNC,YAAY,EAAE,IADR,EAENC,QAAQ,EAACC,GAAG,CAACC,cAAJ,CAAmB,UAAnB,CAFH,EAGNC,QAAQ,EAAC,EACRC,IAAI,EAAC,EADG,EAERC,CAAC,EAAC,EAFM,EAGRC,CAAC,EAAC,EAHM,EAIRC,CAAC,EAAC,EAJM,EAKRC,CAAC,EAAC,EALM,EAMRC,CAAC,EAAC,EANM,EAORC,CAAC,EAAC,EAPM,EAHH,EAAP,CAaA,CAfa,EAgBdC,MAhBc,oBAgBL,CACRV,GAAG,CAACW,WAAJ,CAAgB,EACfC,KAAK,EAAC,KADS,EAAhB,EAGA,CApBa,EAqBdC,MArBc,oBAqBL,CACR,KAAKC,SAAL,GACA,KAAKC,IAAL,GAFQ,CAGR;AACA,GAzBa,EA0BdC,OAAO,EAAE,EACRD,IADQ,kBACF;AACL,UAAIhB,QAAQ,GAAGC,GAAG,CAACC,cAAJ,CAAmB,YAAnB,CAAf;AACAgB,mBAAIC,SAAJ,CAAcC,GAAd,GAAkB,IAAIC,kCAAJ,CAAa,EAAb,CAAlB;AACAC,aAAO,CAACC,GAAR,CAAY,YAAZ;AACA,UAAIC,MAAM,GAAC,0BAAX;AACA,UAAIC,GAAG,GAAC,0BAAR;AACA,UAAIC,SAAS,GAAI,IAAItB,IAAJ,EAAD,CAAauB,OAAb,EAAhB;AACA,UAAIC,SAAS,GAAC,iBAAI,+CAA6CF,SAA7C,GAAuD,+DAA3D,CAAd;AACAJ,aAAO,CAACC,GAAR,CAAYK,SAAZ;AACA,UAAIC,IAAI,GAAG,IAAX;AACA,WAAKT,GAAL,CAASJ,IAAT,CAAc;AACb,kBAAcQ,MADD;AAEb,sBAAc,sBAFD;AAGb,qBAAcI,SAHD;AAIb,qBAAcF,SAJD;AAKb,gBAAO,CALM,EAAd;AAMGI,eANH,CAMa,UAAShC,IAAT,EAAe;AACzB+B,YAAI,CAACE,MAAL,CAAY/B,QAAZ;AACF,OARD,EAQGgC,MARH,CAQU,UAASlC,IAAT,EAAe;AACvB;AACD,OAVD;AAWA,WAAKsB,GAAL,CAASa,YAAT,CAAsB,YAAU;AAC/BX,eAAO,CAACC,GAAR,CAAY,SAAZ;AACA,OAFD;;AAIA,WAAKH,GAAL,CAASc,YAAT,CAAsB,UAASpC,IAAT,EAAe;AACpC;AACAwB,eAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,eAAO,CAACC,GAAR,CAAYzB,IAAZ;AACAG,WAAG,CAACkC,KAAJ,CAAU,QAAV,EAAmBrC,IAAI,CAACsC,QAAL,CAAc,CAAd,EAAiBC,OAApC;AACA,OALD;;AAOA;AACAnB,mBAAIC,SAAJ,CAAcmB,kBAAd,GAAiC,IAAjC;AACArC,SAAG,CAACsC,KAAJ,CAAU,oBAAV,EAA+B,UAASzC,IAAT,EAAc;AAC5C,aAAKwC,kBAAL,GAAwBxC,IAAxB;AACAwB,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYzB,IAAZ;AACAG,WAAG,CAACuC,IAAJ;AACA,OALD;AAMA,KAzCO;AA0CRT,UA1CQ,kBA0CD/B,QA1CC,EA0CQ;AACf,UAAI6B,IAAI,GAAC,IAAT;AACA,UAAIY,EAAE,GAACzC,QAAP;AACA,UAAI0C,EAAE,GAAC,QAAP;AACApB,aAAO,CAACC,GAAR,CAAYvB,QAAZ;AACA,WAAKoB,GAAL,CAASuB,KAAT,CAAe;AACd,oBAAWF,EADG;AAEd,oBAAWC,EAFG,EAAf;AAGGZ,eAHH,CAGa,UAAShC,IAAT,EAAc;AAC1B+B,YAAI,CAACe,eAAL;AACA,OALD,EAKGZ,MALH,CAKU,UAASlC,IAAT,EAAc;;AAEvB,OAPD;AAQA,KAvDO;AAwDR8C,mBAxDQ,6BAwDU;AACjB,UAAIf,IAAI,GAAG,IAAX;AACA,WAAKT,GAAL,CAASwB,eAAT,GAA2Bd,SAA3B,CAAqC,UAAShC,IAAT,EAAe;AACnDwB,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYzB,IAAI,CAAC+C,aAAjB;AACAhB,YAAI,CAACiB,KAAL,CAAW/C,YAAX,GAAwBD,IAAI,CAAC+C,aAAL,CAAmBE,OAAnB,EAAxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlD,IAAI,CAAC+C,aAAL,CAAmBI,MAAvC,EAA+CD,CAAC,EAAhD,EAAoD;AACnDnB,cAAI,CAACqB,gBAAL,CAAsBpD,IAAI,CAAC+C,aAAL,CAAmBG,CAAnB,EAAsBG,KAA5C,EAAkDH,CAAlD;AACAnB,cAAI,CAACuB,UAAL,CAAgBtD,IAAI,CAAC+C,aAAL,CAAmBG,CAAnB,EAAsBK,MAAtC,EAA6CL,CAA7C;AACA;AACD/C,WAAG,CAACqD,WAAJ;;AAEA,OA1BD,EA0BGtB,MA1BH,CA0BU,UAASlC,IAAT,EAAe;AACxB;AACA;AACAG,WAAG,CAACqD,WAAJ;AACA,OA9BD;;AAgCA,WAAKlC,GAAL,CAASkB,kBAAT,CAA4B,UAASxC,IAAT,EAAe,CAAE;AAC5CwB,eAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,eAAO,CAACC,GAAR,CAAYzB,IAAZ;;AAEA,OAJD;AAKA,WAAKsB,GAAL,CAASmC,mBAAT,CAA6B,UAASzD,IAAT,EAAe;AAC3CwB,eAAO,CAACC,GAAR,CAAYzB,IAAZ;AACA,OAFD;;AAIA,WAAKsB,GAAL,CAASoC,eAAT,CAAyB,UAAS1D,IAAT,EAAe;AACvCwB,eAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,eAAO,CAACC,GAAR,CAAYzB,IAAZ;AACA,OAHD;;AAKA,KAxGO;AAyGRoD,oBAzGQ,4BAyGSxB,SAzGT,EAyGmB+B,OAzGnB,EAyG4B;AACnC,UAAI5B,IAAI,GAAC,IAAT;AACA,UAAI1B,QAAQ,GAAC0B,IAAI,CAACiB,KAAL,CAAW3C,QAAxB;;AAEA,UAAIuD,IAAI,GAAG,IAAItD,IAAJ,CAASsB,SAAT,CAAX;AACA,UAAIrB,CAAC,GAAGqD,IAAI,CAACC,WAAL,KAAqB,GAA7B;AACA,UAAIrD,CAAC,GAAG,CAACoD,IAAI,CAACE,QAAL,KAAkB,CAAlB,GAAsB,EAAtB,GAA2B,OAAOF,IAAI,CAACE,QAAL,KAAkB,CAAzB,CAA3B,GAAyDF,IAAI,CAACE,QAAL,KAAkB,CAA5E,IAAiF,GAAzF;AACA,UAAIrD,CAAC,GAAG,CAACmD,IAAI,CAACG,OAAL,KAAiB,EAAjB,GAAsB,MAAOH,IAAI,CAACG,OAAL,EAA7B,GAA+CH,IAAI,CAACG,OAAL,EAAhD,IAAkE,GAA1E;AACA,UAAIrD,CAAC,GAAG,CAACkD,IAAI,CAACI,QAAL,KAAkB,EAAlB,GAAuB,MAAOJ,IAAI,CAACI,QAAL,EAA9B,GAAiDJ,IAAI,CAACI,QAAL,EAAlD,IAAqE,GAA7E;AACA,UAAIrD,CAAC,GAAG,CAACiD,IAAI,CAACK,UAAL,KAAoB,EAApB,GAAyB,MAAOL,IAAI,CAACK,UAAL,EAAhC,GAAqDL,IAAI,CAACK,UAAL,EAAtD,IAA2E,EAAnF;AACA,UAAIrD,CAAC,GAAIgD,IAAI,CAACM,UAAL,KAAoB,EAApB,GAAyB,MAAON,IAAI,CAACM,UAAL,EAAhC,GAAqDN,IAAI,CAACM,UAAL,EAA9D;AACA,UAAI3D,CAAC,IAAEF,QAAQ,CAACE,CAAZ,IAAiBC,CAAC,IAAEH,QAAQ,CAACG,CAA7B,IAAkCC,CAAC,IAAEJ,QAAQ,CAACI,CAAlD,EAAqD;AACpDsB,YAAI,CAACiB,KAAL,CAAW/C,YAAX,CAAwB0D,OAAxB,EAAiCQ,MAAjC,GAAwCzD,CAAC,GAACC,CAA1C;AACA,OAFD,MAEM;AACLoB,YAAI,CAACiB,KAAL,CAAW/C,YAAX,CAAwB0D,OAAxB,EAAiCQ,MAAjC,GAAwC3D,CAAC,GAACC,CAA1C;AACA;AACD;AACA,KA1HO;AA2HR2D,QA3HQ,kBA2HD;AACNC,SAAG,GAAG;AACL,mBAAW,OADN;AAEL,uBAAe,QAFV;AAGL,qBAAa,QAHR;AAIL,qBAAa,MAJR;AAKL,mBAAW,OALN;AAML,qBAAa,OANR;AAOL,uBAAe,UAPV;AAQL,oBAAY,mDARP;AASL,oBAAY,EATP,EAAN;;AAWA,KAvIO;AAwIRpD,aAxIQ,uBAwIG;AACV,UAAIc,IAAI,GAAC,IAAT;AACA,UAAI6B,IAAI,GAAG,IAAItD,IAAJ,EAAX;AACA,UAAIC,CAAC,GAAGqD,IAAI,CAACC,WAAL,KAAqB,GAA7B;AACA,UAAIrD,CAAC,GAAG,CAACoD,IAAI,CAACE,QAAL,KAAkB,CAAlB,GAAsB,EAAtB,GAA2B,OAAOF,IAAI,CAACE,QAAL,KAAkB,CAAzB,CAA3B,GAAyDF,IAAI,CAACE,QAAL,KAAkB,CAA5E,IAAiF,GAAzF;AACA,UAAIrD,CAAC,GAAG,CAACmD,IAAI,CAACG,OAAL,KAAiB,EAAjB,GAAsB,MAAOH,IAAI,CAACG,OAAL,EAA7B,GAA+CH,IAAI,CAACG,OAAL,EAAhD,IAAkE,GAA1E;AACA,UAAIrD,CAAC,GAAG,CAACkD,IAAI,CAACI,QAAL,KAAkB,EAAlB,GAAuB,MAAOJ,IAAI,CAACI,QAAL,EAA9B,GAAiDJ,IAAI,CAACI,QAAL,EAAlD,IAAqE,GAA7E;AACA,UAAIrD,CAAC,GAAG,CAACiD,IAAI,CAACK,UAAL,KAAoB,EAApB,GAAyB,MAAOL,IAAI,CAACK,UAAL,EAAhC,GAAqDL,IAAI,CAACK,UAAL,EAAtD,IAA2E,GAAnF;AACA,UAAIrD,CAAC,GAAIgD,IAAI,CAACM,UAAL,KAAoB,EAApB,GAAyB,MAAON,IAAI,CAACM,UAAL,EAAhC,GAAqDN,IAAI,CAACM,UAAL,EAA9D;AACA;AACAnC,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBC,IAApB,GAAyBsD,IAAzB;AACA7B,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBE,CAApB,GAAsBA,CAAtB;AACAwB,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBG,CAApB,GAAsBA,CAAtB;AACAuB,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBI,CAApB,GAAsBA,CAAtB;AACAsB,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBK,CAApB,GAAsBA,CAAtB;AACAqB,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBM,CAApB,GAAsBA,CAAtB;AACAoB,UAAI,CAACiB,KAAL,CAAW3C,QAAX,CAAoBO,CAApB,GAAsBA,CAAtB;AACA,KAzJO;AA0JR0C,cA1JQ,sBA0JGgB,QA1JH,EA0JYX,OA1JZ,EA0JoB;AAC3B,UAAI5B,IAAI,GAAC,IAAT;AACA,WAAKT,GAAL,CAASiD,WAAT,CAAqB;AACpB,oBAAYD,QADQ,EAArB;AAEGtC,eAFH,CAEa,UAAShC,IAAT,EAAe;AAC3B;AACA;AACA;AACAwB,eAAO,CAACC,GAAR,CAAYzB,IAAZ;AACA;AACA;AACA+B,YAAI,CAACiB,KAAL,CAAW/C,YAAX,CAAwB0D,OAAxB,EAAiCJ,MAAjC,GAAwCvD,IAAI,CAACwE,GAA7C;AACA,OAVD,EAUGtC,MAVH,CAUU,UAASlC,IAAT,EAAe;AACxB;AACA;AACA,OAbD;AAcA,KA1KO;AA2KRyE,WA3KQ,mBA2KAC,OA3KA,EA2KQ;AACf,UAAI3C,IAAI,GAAC,IAAT;AACA,UAAI4C,WAAW,GAAC5C,IAAI,CAACiB,KAAL,CAAW/C,YAAX,CAAwByE,OAAxB,CAAhB;AACAlD,aAAO,CAACC,GAAR,CAAYkD,WAAZ;AACAxE,SAAG,CAACyE,UAAJ,CAAe;AACdjD,WAAG,EAAC,aADU;AAEd3B,YAAI,EAAC2E,WAFS,EAAf;;AAIAxE,SAAG,CAAC0E,UAAJ,CAAe;AACdL,WAAG,EAAC,uBADU;AAEdM,yBAAiB,EAAC,GAFJ,EAAf;;;AAKA,KAxLO,EA1BK,E;;;;;;;;;;;;;AC/Bf;AAAA;AAAA;AAAA;AAA69B,CAAgB,+7BAAG,EAAC,C;;;;;;;;;;;ACAj/B,uC;;;;;;;;;;;;kDCAA,wCAAmB;;AAEnB;AACA,mG;AACAC,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwF;AAC3B;AACL;AACa;;;AAGrE;AACkI;AAClI,gBAAgB,6IAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF","file":"pages/chat/chat_list.js","sourcesContent":["export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat_list.vue?vue&type=template&id=2474be2a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat_list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat_list.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Vue from 'vue'\nimport JMessage from 'js_sdk/wxmp-jiguang/jmessage-wxapplet-sdk-1.4.0/jmessage-wxapplet-sdk-1.4.0.min.js'\nimport md5 from 'js_sdk/js-md5/src/md5.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tConversation: null,\n\t\t\tusername:uni.getStorageSync(\"username\"),\n\t\t\tTime_now:{\n\t\t\t\tDate:'',\n\t\t\t\tY:'',\n\t\t\t\tM:'',\n\t\t\t\tD:'',\n\t\t\t\th:'',\n\t\t\t\tm:'',\n\t\t\t\ts:''\n\t\t\t}\n\t\t}\n\t},\n\tonLoad() {\n\t\tuni.showLoading({\n\t\t\ttitle:'加载中'\n\t\t})\n\t},\n\tonShow() {\n\t\tthis.Times_now();\n\t\tthis.init();\n\t\t// this.getConversation();\n\t},\n\tmethods: {\n\t\tinit(){\n\t\t\tlet username = uni.getStorageSync('j_username')\n\t\t\tVue.prototype.JIM=new JMessage({});\n\t\t\tconsole.log('App Launch');\n\t\t\tvar appkey='b7ce35a8335c8ab76c58dfd0';\n\t\t\tvar key='80871baf19881a7036d774c5';\n\t\t\tvar timestamp = (new Date()).getTime();\n\t\t\tvar signature=md5(\"appkey=b7ce35a8335c8ab76c58dfd0&timestamp=\"+timestamp+\"&random_str=022cd9fd995849b66666&key=80871baf19881a7036d774c5\");\n\t\t\tconsole.log(signature)\n\t\t\tvar that = this\n\t\t\tthis.JIM.init({\n\t\t\t\t\"appkey\"    : appkey,\n\t\t\t\t\"random_str\": \"022cd9fd995849b66666\",\n\t\t\t\t\"signature\" : signature,\n\t\t\t\t\"timestamp\" : timestamp,\n\t\t\t\t\"flag\":1\n\t\t\t}).onSuccess(function(data) {\n\t\t\t   that.jLogin(username)\n\t\t\t}).onFail(function(data) {\n\t\t\t  //TODO\n\t\t\t});  \n\t\t\tthis.JIM.onDisconnect(function(){\n\t\t\t\tconsole.log('JIM断开链接')\n\t\t\t});\n\t\t\t\n\t\t\tthis.JIM.onMsgReceive(function(data) {\n\t\t\t\t// 接受在线消息\n\t\t\t\tconsole.log('在线接受消息')\n\t\t\t\tconsole.log(data)\n\t\t\t\tuni.$emit('msg_ol',data.messages[0].content)\n\t\t\t});\n\t\t\t\n\t\t\t//this.JIM.isInit();// 无回调函数，调用则成功\n\t\t\tVue.prototype.onSyncConversation=null\n\t\t\tuni.$once('onSyncConversation',function(data){\n\t\t\t\tthis.onSyncConversation=data\n\t\t\t\tconsole.log('离线传递：')\n\t\t\t\tconsole.log(data)\n\t\t\t\tuni.$off()\n\t\t\t})\n\t\t},\n\t\tjLogin(username){\n\t\t\tlet that=this;\n\t\t\tlet un=username;\n\t\t\tlet pw='123456';\n\t\t\tconsole.log(username)\n\t\t\tthis.JIM.login({\n\t\t\t\t'username':un,\n\t\t\t\t'password':pw\n\t\t\t}).onSuccess(function(data){\n\t\t\t\tthat.getConversation()\n\t\t\t}).onFail(function(data){\n\t\t\t\t\n\t\t\t});\n\t\t},\n\t\tgetConversation() {\n\t\t\tvar that = this;\n\t\t\tthis.JIM.getConversation().onSuccess(function(data) {\n\t\t\t\tconsole.log('消息列表：')\n\t\t\t\tconsole.log(data.conversations)\n\t\t\t\tthat.$data.Conversation=data.conversations.reverse()\n\t\t\t\t//data.code 返回码\n\t\t\t\t//data.message 描述\n\t\t\t\t//data.conversations[] 会话列表，属性如下示例\n\t\t\t\t//data.conversations[0].extras 附加字段\n\t\t\t\t//data.conversations[0].unread_msg_count 消息未读数\n\t\t\t\t//data.conversations[0].name  会话名称\n\t\t\t\t//data.conversations[0].appkey  appkey(单聊)\n\t\t\t\t//data.conversations[0].username  用户名(单聊)\n\t\t\t\t//data.conversations[0].nickname  用户昵称(单聊)\n\t\t\t\t//data.conversations[0].avatar  头像 media_id \n\t\t\t\t//data.conversations[0].mtime 会话最后的消息时间戳\n\t\t\t\t//data.conversations[0].gid 群 id(群聊)\n\t\t\t\t//data.conversations[0].type  会话类型(3 代表单聊会话类型，4 代表群聊会话类型)\n\n\t\t\t\t//console.log(that.get_message_time(data.conversations[0].mtime))\n\t\t\t\t\n\t\t\t\tfor (var i = 0; i < data.conversations.length; i++) {\n\t\t\t\t\tthat.get_message_time(data.conversations[i].mtime,i)\n\t\t\t\t\tthat.get_avatar(data.conversations[i].avatar,i)\n\t\t\t\t}\n\t\t\t\tuni.hideLoading()\n\t\t\t\t\n\t\t\t}).onFail(function(data) {\n\t\t\t\t//data.code 返回码\n\t\t\t\t//data.message 描述\n\t\t\t\tuni.hideLoading()\n\t\t\t});\t\n\t\t\t\n\t\t\tthis.JIM.onSyncConversation(function(data) { //离线消息同步监听\n\t\t\t\tconsole.log('离线消息:');\n\t\t\t\tconsole.log(data)\n\t\t\t\t\n\t\t\t});\n\t\t\tthis.JIM.onEventNotification(function(data) {\n\t\t\t\tconsole.log(data)\n\t\t\t});\n\t\t\t\n\t\t\tthis.JIM.onUserInfUpdate(function(data) {\n\t\t\t\tconsole.log('onUserInfUpdate : ')\n\t\t\t\tconsole.log(data);\n\t\t\t});\n\t\t\t\n\t\t},\n\t\tget_message_time(timestamp,msg_ids) {\n\t\t\tlet that=this;\n\t\t\tlet Time_now=that.$data.Time_now;\n\t\t\t\n\t\t\tvar date = new Date(timestamp);\n\t\t\tvar Y = date.getFullYear() + '-';\n\t\t\tvar M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n\t\t\tvar D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate()) + ' ';\n\t\t\tvar h = (date.getHours() < 10 ? '0' + (date.getHours()) : date.getHours()) + ':';\n\t\t\tvar m = (date.getMinutes() < 10 ? '0' + (date.getMinutes()) : date.getMinutes()) + '';\n\t\t\tvar s = (date.getSeconds() < 10 ? '0' + (date.getSeconds()) : date.getSeconds());\n\t\t\tif (Y==Time_now.Y && M==Time_now.M && D==Time_now.D) {\n\t\t\t\tthat.$data.Conversation[msg_ids].timess=h+m;\n\t\t\t} else{\n\t\t\t\tthat.$data.Conversation[msg_ids].timess=M+D;\n\t\t\t}\n\t\t\t// return Y + M + D + h + m + s;\n\t\t},\n\t\ttest() {\n\t\t\tcon = {\n\t\t\t\t'version': '1.4.0',\n\t\t\t\t'target_type': 'single',\n\t\t\t\t'target_id': 'moxiyu',\n\t\t\t\t'from_type': 'user',\n\t\t\t\t'from_id': 'test3',\n\t\t\t\t'from_name': 'test3',\n\t\t\t\t'create_time': '时间戳，精确到秒',\n\t\t\t\t'msg_type': 'text, voice, image, file, video, location, custom',\n\t\t\t\t'msg_body': ''\n\t\t\t}\n\t\t},\n\t\tTimes_now(){\n\t\t\tvar that=this;\n\t\t\tvar date = new Date();\n\t\t\tvar Y = date.getFullYear() + '-';\n\t\t\tvar M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n\t\t\tvar D = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate()) + ' ';\n\t\t\tvar h = (date.getHours() < 10 ? '0' + (date.getHours()) : date.getHours()) + ':';\n\t\t\tvar m = (date.getMinutes() < 10 ? '0' + (date.getMinutes()) : date.getMinutes()) + ':';\n\t\t\tvar s = (date.getSeconds() < 10 ? '0' + (date.getSeconds()) : date.getSeconds());\n\t\t\t// console.log(date)\n\t\t\tthat.$data.Time_now.Date=date;\n\t\t\tthat.$data.Time_now.Y=Y;\n\t\t\tthat.$data.Time_now.M=M;\n\t\t\tthat.$data.Time_now.D=D;\n\t\t\tthat.$data.Time_now.h=h;\n\t\t\tthat.$data.Time_now.m=m;\n\t\t\tthat.$data.Time_now.s=s;\n\t\t},\n\t\tget_avatar(media_id,msg_ids){\n\t\t\tvar that=this;\n\t\t\tthis.JIM.getResource({\n\t\t\t\t'media_id': media_id,\n\t\t\t}).onSuccess(function(data) {\n\t\t\t\t//data.code 返回码\n\t\t\t\t//data.message 描述\n\t\t\t\t//data.url 资源临时访问路径，具体超时时间expire time会包含在url中\n\t\t\t\tconsole.log(data)\n\t\t\t\t//头像：data.user_info.avatar\n\t\t\t\t//that.$data.my_avatar=data.url\n\t\t\t\tthat.$data.Conversation[msg_ids].avatar=data.url\n\t\t\t}).onFail(function(data) {\n\t\t\t\t//data.code 返回码\n\t\t\t\t//data.message 描述\n\t\t\t});\n\t\t},\n\t\tto_chat(list_id){\n\t\t\tvar that=this;\n\t\t\tvar chater_info=that.$data.Conversation[list_id]\n\t\t\tconsole.log(chater_info);\n\t\t\tuni.setStorage({\n\t\t\t\tkey:'chater_info',\n\t\t\t\tdata:chater_info\n\t\t\t})\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'/pages/chat/chat_info',\n\t\t\t\tanimationDuration:300\n\t\t\t})\n\t\t\t\n\t\t}\n\t\t\n\t}\n}\n","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat_list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat_list.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/chat/chat_list.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./chat_list.vue?vue&type=template&id=2474be2a&\"\nimport script from \"./chat_list.vue?vue&type=script&lang=js&\"\nexport * from \"./chat_list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat_list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2474be2a', component.options)\n    } else {\n      api.reload('2474be2a', component.options)\n    }\n    module.hot.accept(\"./chat_list.vue?vue&type=template&id=2474be2a&\", function () {\n      api.rerender('2474be2a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"code/shop_weapp/pages/chat/chat_list.vue\"\nexport default component.exports"],"sourceRoot":""}